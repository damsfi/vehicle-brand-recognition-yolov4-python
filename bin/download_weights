#!/bin/bash
# Download YOLOv4 weights if not present
# This script runs during build

echo "Checking for YOLOv4 weights..."

if [ ! -f "yolov4/yolov4.weights" ]; then
    echo "Downloading YOLOv4 weights (this may take a few minutes)..."
    mkdir -p yolov4
    
    # Download weights using wget or curl
    if command -v wget &> /dev/null; then
        wget -q --show-progress -O yolov4/yolov4.weights https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4.weights
    elif command -v curl &> /dev/null; then
        curl -L -o yolov4/yolov4.weights https://github.com/AlexeyAB/darknet/releases/download/darknet_yolo_v3_optimal/yolov4.weights
    else
        echo "Error: wget or curl not found"
        exit 1
    fi
    
    if [ -f "yolov4/yolov4.weights" ]; then
        echo "✓ YOLOv4 weights downloaded successfully"
        ls -lh yolov4/yolov4.weights
    else
        echo "✗ Failed to download weights"
        exit 1
    fi
else
    echo "✓ YOLOv4 weights already present"
fi

